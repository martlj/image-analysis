<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Thresholding</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        #imageContainer {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        #images {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        img {
            max-width: 400px;
            max-height: 400px;
            margin: 0 20px;
        }
        #thresholdSlider {
            width: 50%;
            margin-bottom: 20px;
        }
        #pixelCount {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>Image Thresholding</h1>
    <div id="imageContainer">
        <div id="images">
            <img id="originalImage" src="" alt="Original Image">
            <img id="binaryImage" src="" alt="Binary Image">
        </div>
    </div>
    <input type="range" min="0" max="255" value="128" id="thresholdSlider">
    <div id="pixelCount">Pixel Count: 0</div>

    <script>
        const images = [
            'images/1983.png',
            'images/2003.png',
            'images/2023.png'
        ];

        const originalImage = document.getElementById('originalImage');
        const binaryImage = document.getElementById('binaryImage');
        const thresholdSlider = document.getElementById('thresholdSlider');
        const pixelCountDisplay = document.getElementById('pixelCount');

        let threshold = parseInt(thresholdSlider.value);

        // Function to update binary image based on threshold
        function updateBinaryImage() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = originalImage.width;
            canvas.height = originalImage.height;
            ctx.drawImage(originalImage, 0, 0);
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;

            for (let i = 0; i < data.length; i += 4) {
                const brightness = (data[i] + data[i + 1] + data[i + 2]) / 3;
                const color = brightness > threshold ? 255 : 0;
                data[i] = color;
                data[i + 1] = color;
                data[i + 2] = color;
            }

            ctx.putImageData(imageData, 0, 0);
            binaryImage.src = canvas.toDataURL();
            
            // Count "true" pixels
            let truePixelCount = 0;
            for (let i = 0; i < data.length; i += 4) {
                if (data[i] === 255) {
                    truePixelCount++;
                }
            }
            pixelCountDisplay.textContent = 'Pixel Count: ' + truePixelCount;
        }

        // Load the initial image
        originalImage.src = images[0];

        // Update binary image when slider is moved
        thresholdSlider.addEventListener('input', function() {
            threshold = parseInt(thresholdSlider.value);
            updateBinaryImage();
        });
    </script>
</body>
</html>
